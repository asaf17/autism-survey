<!DOCTYPE html>
<html>
	
<head>
	<title>Send Mail</title>

	<!-- Script whose inclusion allows the sending of emails. -->
	<script src=
		"https://smtpjs.com/v3/smtp.js">
	</script>

	<!-- 
	Script whose inclusion allows creation of universially unique identifiers. 
	Call with uuidv4()
	-->
	<script type="module">
		import { v4 as uuidv4 } from 'https://jspm.dev/uuid';
	</script>
	
	<script type="text/javascript">

		//Send an email from our "donotreply" email to a desired recipient (4 Nov. '21). 
		//AN: See "https://www.geeksforgeeks.org/how-to-send-an-email-from-javascript/". 
		function sendemail(recipient, subject, body) {
			//JSON object representing the email form, including our sending email. 
			let emailjsonraw = {
				Host: "smtp.gmail.com",
				Username: "donotreplyautismsurvey@gmail.com",
				Password: "donotreplyautismsurvey1101",
				To: "asdf",
				From: "donotreplyautismsurvey@gmail.com",
				Subject: "adsf",
				Body: "asdf",
			}; 
			//Populate relevant fields. 
			emailjsonraw.To = recipient; 
			emailjsonraw.Subject = subject; 
			emailjsonraw.Body = body; 
			//Send the email. 
			Email.send(emailjsonraw)
				.then(function (message) {
					alert("mail sent successfully")
				});
		}

		function test() {
			const uuid = uuidv4();
			//console.log(uuid)
			//const uuid2 = uuid.v4().toString();
			//sendemail("kyletwylie@gmail.com", "test email", uuid); 
			sendemail("asafko22@jcu.edu", "test email", uuid); 
		}
	</script>
</head>
	
<body>
	<form method="post">
		<input type="button" value="Send Email" 
				onclick="test()" />
	</form>
</body>
	
</html>
